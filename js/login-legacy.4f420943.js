"use strict";(self["webpackChunkiview_admin_plus"]=self["webpackChunkiview_admin_plus"]||[]).push([[535],{60107:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(73396),o=n(87139),a={class:"ivu-result"},i={key:0,class:"ivu-result-title"},s={key:1,class:"ivu-result-desc"},u={key:2,class:"ivu-result-extra"},l={key:3,class:"ivu-result-actions"};function c(e,t,n,c,d,m){var f=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",{class:(0,o.C_)(["ivu-result-icon",m.iconClasses])},["success"===n.type?((0,r.wg)(),(0,r.j4)(f,{key:0,type:"ios-checkmark"})):(0,r.kq)("",!0),"error"===n.type?((0,r.wg)(),(0,r.j4)(f,{key:1,type:"ios-close"})):(0,r.kq)("",!0),"warning"===n.type?((0,r.wg)(),(0,r.j4)(f,{key:2,type:"ios-information"})):(0,r.kq)("",!0)],2),n.title||e.$slots.title?((0,r.wg)(),(0,r.iD)("div",i,[(0,r.WI)(e.$slots,"title",{},(function(){return[(0,r.Uk)((0,o.zw)(n.title),1)]}))])):(0,r.kq)("",!0),n.desc||e.$slots.desc?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.WI)(e.$slots,"desc",{},(function(){return[(0,r.Uk)((0,o.zw)(n.desc),1)]}))])):(0,r.kq)("",!0),n.extra||e.$slots.extra?((0,r.wg)(),(0,r.iD)("div",u,[(0,r.WI)(e.$slots,"extra",{},(function(){return[(0,r.Uk)((0,o.zw)(n.extra),1)]}))])):(0,r.kq)("",!0),e.$slots.actions?((0,r.wg)(),(0,r.iD)("div",l,[(0,r.WI)(e.$slots,"actions")])):(0,r.kq)("",!0)])}var d=n(10389),m=n(12171),f={name:"Result",components:{Icon:d.Z},props:{type:{validator:function(e){return(0,m.kw)(e,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses:function(){return{"ivu-result-icon-success":"success"===this.type,"ivu-result-icon-error":"error"===this.type,"ivu-result-icon-warning":"warning"===this.type}}}},p=n(40089);const h=(0,p.Z)(f,[["render",c]]);var w=h,g=w},79310:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(73396),o=n(87139),a=n(49242),i=n(94897),s=n.p+"img/qq.ec7f71ce.svg",u=n.p+"img/wb.edb3b4b2.svg",l=(0,r.Uk)("记住密码"),c=(0,r.Uk)("忘记密码"),d=(0,r.Uk)("登录"),m=(0,r._)("span",null,"其他登录方式",-1),f=(0,r._)("img",{src:i,alt:"微信"},null,-1),p=(0,r._)("img",{src:s,alt:"QQ"},null,-1),h=(0,r._)("img",{src:u,alt:"微博"},null,-1),w=(0,r.Uk)("注册账户");function g(e,t,n,i,s,u){var g=(0,r.up)("LoginAccount"),v=(0,r.up)("TabPane"),A=(0,r.up)("LoginPhone"),C=(0,r.up)("Tabs"),k=(0,r.up)("Form"),b=(0,r.up)("Checkbox"),y=(0,r.up)("RouterLink"),x=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)("".concat(s.prefixCls,"-container"))},[(0,r._)("div",{class:(0,o.C_)("".concat(s.prefixCls,"-container-form"))},[(0,r.Wm)(k,{class:"login-layout",onKeyup:(0,a.D2)(u.handleSubmit,["enter"])},{default:(0,r.w5)((function(){return[(0,r.Wm)(C,{modelValue:s.customActiveKey,onOnClick:u.handleTabClick},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{name:"tab1",label:"账号密码登录"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r.Wm)(g,{ref:"alogin",onValidFail:u.validateFail,onSuccess:u.requestSuccess,onFail:u.requestFailed},null,8,["onValidFail","onSuccess","onFail"]),[[a.F8,"tab1"===s.customActiveKey]])]})),_:1}),(0,r.Wm)(v,{name:"tab2",label:"手机号登录"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r.Wm)(A,{ref:"plogin",onValidFail:u.validateFail,onSuccess:u.requestSuccess,onFail:u.requestFailed},null,8,["onValidFail","onSuccess","onFail"]),[[a.F8,"tab2"===s.customActiveKey]])]})),_:1})]})),_:1},8,["modelValue","onOnClick"])]})),_:1},8,["onKeyup"])],2),(0,r._)("div",{class:(0,o.C_)("".concat(s.prefixCls,"-container-remember"))},[(0,r.Wm)(b,{modelValue:s.rememberMe,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.rememberMe=e})},{default:(0,r.w5)((function(){return[l]})),_:1},8,["modelValue"]),(0,r.Wm)(y,{to:{}},{default:(0,r.w5)((function(){return[c]})),_:1})],2),(0,r._)("div",{class:(0,o.C_)("".concat(s.prefixCls,"-container-submit"))},[(0,r.Wm)(x,{size:"large",type:"primary",onClick:(0,a.iM)(u.handleSubmit,["stop","prevent"])},{default:(0,r.w5)((function(){return[d]})),_:1},8,["onClick"])],2),(0,r._)("div",{class:(0,o.C_)("".concat(s.prefixCls,"-container-other"))},[m,f,p,h,(0,r.Wm)(y,{to:{name:"register"},class:(0,o.C_)("".concat(s.prefixCls,"-container-other-register"))},{default:(0,r.w5)((function(){return[w]})),_:1},8,["class"])],2)],2)}var v=n(95082),A=(n(70560),n(34338),n(34284),n(60228),n(12826),n(20065)),C=n(84722);function k(e,t,n,i,s,u){var l=(0,r.up)("Input"),c=(0,r.up)("FormItem"),d=(0,r.up)("Col"),m=(0,r.up)("Button"),f=(0,r.up)("Row"),p=(0,r.up)("Form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(p,{ref:"ruleForm",model:s.form,rules:s.rule},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{prop:"mobile"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{prefix:"ios-phone-portrait",modelValue:s.form.mobile,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.form.mobile=e}),size:"large",placeholder:"请输入手机号码"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(f,{gutter:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{span:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{prop:"captcha"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{prefix:"ios-mail-outline",modelValue:s.form.captcha,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.form.captcha=e}),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(d,{span:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{size:"large",disabled:s.state.smsSendBtn,onClick:(0,a.iM)(u.getCaptcha,["stop","prevent"]),textContent:(0,o.zw)(s.state.smsSendBtn?s.state.time+" s":"获取验证码")},null,8,["disabled","onClick","textContent"])]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])}n(21057),n(64043),n(7409),n(52003),n(68518),n(13440),n(69358),n(47522),n(6203);var b=n(34678),y={name:"LoginPhone",emits:["valid-fail","fail","success"],data:function(){return{form:{mobile:"",captcha:""},rule:{mobile:[{required:!0,validator:this.validateMobile,trigger:"change"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},state:{time:60,smsSendBtn:!1}}},methods:(0,v.Z)((0,v.Z)({},(0,A.nv)(["login"])),{},{validateMobile:function(e,t,n){t||n(new Error("请输入手机号码")),new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/).test(t)?n():n(new Error("手机号码格式不正确"))},getCaptcha:function(e){var t=this;e.preventDefault();var n=this.state,r=this.form;this.$refs.ruleForm.validateField("mobile",(function(e){if(e)t.$Message.error(e);else{n.smsSendBtn=!0;var o=window.setInterval((function(){n.time--<=0&&(n.time=60,n.smsSendBtn=!1,window.clearInterval(o))}),1e3),a=t.$Message.loading("验证码发送中..",0);(0,b.EK)({mobile:r.mobile}).then((function(e){setTimeout(a,0),t.$Notice.success({title:"系统提示",desc:"验证码获取成功，您的验证码为：".concat(e.captcha),duration:8})})).catch((function(e){setTimeout(a,1),clearInterval(o),n.time=60,n.smsSendBtn=!1,t.requestFailed(e)}))}}))},handleLogin:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var n=(0,v.Z)({},e.form);e.login(n).then((function(t){return e.$emit("success",t)})).catch((function(t){return e.$emit("fail",t)}))}else{e.$emit("valid-fail");var r=e.$refs.ruleForm,o=Object.keys(r.model),a=[];o.forEach((function(e){return r.validateField(e,(function(e){e&&a.push(e)}))})),e.$Message.error(a.join("；"))}}))}})},x=n(40089);const F=(0,x.Z)(y,[["render",k]]);var W=F,V="data:image/png;base64,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",D=["src"];function M(e,t,n,o,a,i){var s=(0,r.up)("Input"),u=(0,r.up)("FormItem"),l=(0,r.up)("Col"),c=(0,r.up)("Row"),d=(0,r.up)("Form"),m=(0,r.up)("Verify");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,{ref:"ruleForm",model:a.form,rules:a.rule},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{prop:"username"},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{prefix:"ios-contact-outline",modelValue:a.form.username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.form.username=e}),size:"large",placeholder:"请输入帐号 / admin"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(u,{prop:"password"},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{type:"password",prefix:"ios-lock-outline",modelValue:a.form.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.form.password=e}),size:"large",autocomplete:"false",placeholder:"请输入密码 / admin"},null,8,["modelValue"])]})),_:1}),i.isPictureCode?((0,r.wg)(),(0,r.j4)(c,{key:0,gutter:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{span:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{prop:"captcha"},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{prefix:"ios-mail-outline",modelValue:a.form.captcha,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.form.captcha=e}),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(l,{span:8,class:"captcha"},{default:(0,r.w5)((function(){return[a.requestCodeSuccess?((0,r.wg)(),(0,r.iD)("img",{key:0,src:a.randCodeImage,onClick:t[3]||(t[3]=function(){return i.handleChangeCheckCode&&i.handleChangeCheckCode.apply(i,arguments)})},null,8,D)):((0,r.wg)(),(0,r.iD)("img",{key:1,src:V,onClick:t[4]||(t[4]=function(){return i.handleChangeCheckCode&&i.handleChangeCheckCode.apply(i,arguments)})}))]})),_:1})]})),_:1})):(0,r.kq)("",!0)]})),_:1},8,["model","rules"]),i.isPictureCode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:0,ref:"verify",mode:"pop",imgSize:{width:"400px",height:"200px"},captchaType:i.captchaType,onOnSuccess:i.verifySuccess,onOnError:i.verifyError},null,8,["captchaType","onOnSuccess","onOnError"]))])}var B=n(29564),S=n.n(B),E=n(49027),I=n(33564),L=n(29085),_={name:"LoginAccount",components:{Verify:E.Zu},emits:["valid-fail","fail","success"],data:function(){return{loginType:0,verifyForce:!1,requestCodeSuccess:!0,randCodeImage:"",form:{username:"admin",password:"admin",captcha:"admin"},rule:{username:[{required:!0,validator:this.handleUsernameOrEmail,message:"请输入帐号"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},computed:{captchaType:function(){var e=0,t=100,n=Math.floor(Math.random()*(t-e))+e,r=L.Yc.clickWord;return n%3===0?r=L.Yc.blockPuzzle:n%3===1&&(r=L.Yc.pictureCode),this.$config.captchaType||r},isPictureCode:function(){return this.verifyForce||this.captchaType===L.Yc.pictureCode}},created:function(){this.handleChangeCheckCode()},methods:(0,v.Z)((0,v.Z)({},(0,A.nv)(["login"])),{},{handleChangeCheckCode:function(){var e=this;this.currdatetime=(new Date).getTime();var t="https://api.boot.jeecg.com/sys/randomImage/".concat(this.currdatetime);(0,I.s7)(t).then((function(t){t.success?(e.randCodeImage=t.result,e.requestCodeSuccess=!0):(e.$Message.error(t.message),e.requestCodeSuccess=!1)})).catch((function(){e.requestCodeSuccess=!1}))},handleUsernameOrEmail:function(e,t,n){var r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;r.test(t)?this.loginType=0:this.loginType=1,n()},handleLogin:function(){var e=this;this.$refs.ruleForm.validate((function(t){t?e.isPictureCode?e.handleSubmit():e.$refs.verify.show():(e.$emit("valid-fail"),e.alertMsg())}))},alertMsg:function(){var e=this.$refs.ruleForm,t=Object.keys(e.model),n=[];t.forEach((function(t){return e.validateField(t,(function(e){e&&n.push(e)}))})),this.$Message.error(n.join("；"))},handleSubmit:function(){var e=this,t=(0,v.Z)({},this.form);t.password=S()(this.form.password),this.login(t).then((function(t){return e.$emit("success",t)})).catch((function(t){return e.$emit("fail",t)}))},verifySuccess:function(e){this.form.code=e.captchaVerification,this.handleSubmit()},verifyError:function(){this.verifyForce=!0,this.$Message.error("验证码组件异常，强制启用图形验证码")}})};const P=(0,x.Z)(_,[["render",M]]);var q=P,z={components:{LoginPhone:W,LoginAccount:q},data:function(){return{prefixCls:"".concat(this.$config.cssPrefix,"login"),customActiveKey:"tab1",rememberMe:!1}},computed:(0,v.Z)({},(0,A.rn)({homeRoutePath:function(e){return e.app.homeRoutePath},userInfo:function(e){return e.user.userInfo}})),methods:{verifySuccess:function(e){this.$refs.alogin.verifySuccess(e)},handleTabClick:function(e){this.customActiveKey=e},handleSubmit:function(){"tab1"===this.customActiveKey?this.$refs.alogin.handleLogin():this.$refs.plogin.handleLogin()},requestSuccess:function(e){var t=this;this.$router.push({path:this.homeRoutePath}),setTimeout((function(){return t.$Message.success("".concat((0,C.D$)(),"，").concat(t.userInfo.name))}),1e3)},requestFailed:function(e){this.validateFail(),this.$Notice.error({title:"系统提示",desc:e.toString()})},validateFail:function(){}}};const R=(0,x.Z)(z,[["render",g]]);var U=R},33886:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(73396),o=n(87139),a=n(49242),i={style:{width:"240px"}},s=(0,r.Uk)(" 强度："),u=(0,r._)("div",{style:{"margin-top":"10px"}},[(0,r._)("span",null,"请至少输入 6 个字符。请不要使用容易被猜到的密码。")],-1),l=(0,r.Uk)("注册"),c=(0,r.Uk)("使用已有账户登录");function d(e,t,n,d,m,f){var p=(0,r.up)("Input"),h=(0,r.up)("FormItem"),w=(0,r.up)("Progress"),g=(0,r.up)("Poptip"),v=(0,r.up)("Col"),A=(0,r.up)("Button"),C=(0,r.up)("Row"),k=(0,r.up)("Form"),b=(0,r.up)("RouterLink");return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)("".concat(m.prefixCls,"-container"))},[(0,r.Wm)(k,{ref:"form",model:m.form,rules:m.rule},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{prop:"username"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{prefix:"ios-contact-outline",modelValue:m.form.username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.form.username=e}),size:"large",placeholder:"请输入账户名"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(g,{"word-wrap":"",trigger:"focus",placement:"right-start",modelValue:m.state.passwordLevelChecked,"onUpdate:modelValue":t[2]||(t[2]=function(e){return m.state.passwordLevelChecked=e})},{content:(0,r.w5)((function(){return[(0,r._)("div",i,[(0,r._)("div",{class:(0,o.C_)(f.passwordLevelClass)},[s,(0,r._)("span",null,(0,o.zw)(f.passwordLevelName),1)],2),(0,r.Wm)(w,{percent:m.state.percent,"hide-info":!0,"stroke-color":f.passwordLevelColor},null,8,["percent","stroke-color"]),u])]})),default:(0,r.w5)((function(){return[(0,r.Wm)(h,{prop:"password"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{type:"password",prefix:"ios-lock-outline",modelValue:m.form.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m.form.password=e}),size:"large",onClick:f.handlePasswordInputClick,autocomplete:"false",placeholder:"至少6位密码，区分大小写"},null,8,["modelValue","onClick"])]})),_:1})]})),_:1},8,["modelValue"]),(0,r.Wm)(h,{prop:"password2"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{type:"password",prefix:"ios-lock-outline",modelValue:m.form.password2,"onUpdate:modelValue":t[3]||(t[3]=function(e){return m.form.password2=e}),size:"large",autocomplete:"false",placeholder:"确认密码"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(h,{prop:"mobile"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{prefix:"ios-phone-portrait",modelValue:m.form.mobile,"onUpdate:modelValue":t[4]||(t[4]=function(e){return m.form.mobile=e}),size:"large",placeholder:"请输入手机号码"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(C,{gutter:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{span:16},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{prop:"captcha"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{prefix:"ios-mail-outline",modelValue:m.form.captcha,"onUpdate:modelValue":t[5]||(t[5]=function(e){return m.form.captcha=e}),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,r.Wm)(v,{span:8},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{size:"large",disabled:m.state.smsSendBtn,onClick:(0,a.iM)(f.getCaptcha,["stop","prevent"]),textContent:(0,o.zw)(m.state.smsSendBtn?m.state.time+" s":"获取验证码")},null,8,["disabled","onClick","textContent"])]})),_:1})]})),_:1})]})),_:1},8,["model","rules"]),(0,r._)("div",{class:(0,o.C_)("".concat(m.prefixCls,"-container-submit"))},[(0,r.Wm)(A,{size:"large",type:"primary",loading:m.registerBtn,onClick:(0,a.iM)(f.handleSubmit,["stop","prevent"]),disabled:m.registerBtn},{default:(0,r.w5)((function(){return[l]})),_:1},8,["loading","onClick","disabled"])],2),(0,r._)("div",{class:(0,o.C_)("".concat(m.prefixCls,"-container-other-login"))},[(0,r.Wm)(b,{to:{name:"login"}},{default:(0,r.w5)((function(){return[c]})),_:1})],2)],2)}var m=n(95082),f=(n(21057),n(64043),n(7409),n(28436),n(70560),n(69358),n(60228),n(47522),n(6203),n(12826),n(31137)),p=n(34678),h={0:"低",1:"低",2:"中",3:"强"},w={0:"error",1:"error",2:"warning",3:"success"},g={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},v={name:"Register",mixins:[f.KT],data:function(){return{prefixCls:"".concat(this.$config.cssPrefix,"login"),form:{username:"",password:"",password2:"",mobile:"",captcha:""},rule:{username:[{required:!0,validator:this.checkUsername,message:"请输入账户名"}],password:[{required:!0,validator:this.handlePasswordLevel,message:"至少6位密码，区分大小写"}],password2:[{required:!0,validator:this.handlePasswordCheck,message:"至少6位密码，区分大小写"}],mobile:[{required:!0,validator:this.handlePhoneCheck,message:"请输入手机号码",trigger:"change"}],captcha:[{required:!0,validator:this.handleCaptchaCheck,message:"请输入验证码"}]},state:{time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},registerBtn:!1}},computed:{passwordLevelClass:function(){return w[this.state.passwordLevel]},passwordLevelName:function(){return h[this.state.passwordLevel]},passwordLevelColor:function(){return g[this.state.passwordLevel]}},methods:{checkUsername:function(e,t,n){t?n():n(new Error("请输入用户名"))},handlePasswordLevel:function(e,t,n){var r=0;/[0-9]/.test(t)&&r++,/[a-zA-Z]/.test(t)&&r++,/[^0-9a-zA-Z_]/.test(t)&&r++,this.state.passwordLevel=r,this.state.percent=30*r,r>=2?(r>=3&&(this.state.percent=100),n()):(0===r&&(this.state.percent=10),n(new Error("密码强度不够")))},handlePasswordCheck:function(e,t,n){var r=this.form.password;void 0===t&&n(new Error("请输入密码")),t&&r&&t.trim()!==r.trim()&&n(new Error("两次密码不一致")),n()},handlePhoneCheck:function(e,t,n){var r=/^1[3456789]\d{9}$/;r.test(t)?n():n(new Error("请输入正确手机号"))},handlePasswordInputClick:function(){this.isMobile?this.state.passwordLevelChecked=!1:this.state.passwordLevelChecked=!0},handleCaptchaCheck:function(e,t,n){t?n():n(new Error("请输入验证码"))},handleSubmit:function(){var e=this,t=this.form,n=this.state,r=this.$router;this.$refs.form.validate((function(o){if(o)n.passwordLevelChecked=!1,r.push({name:"registerResult",params:(0,m.Z)({},t)});else{var a=e.$refs.form,i=Object.keys(a.model),s=[];i.forEach((function(e){return a.validateField(e,(function(e){e&&s.push(e)}))})),e.$Message.error(s.join("；"))}}))},getCaptcha:function(e){var t=this;e.preventDefault();var n=this.form,r=this.state,o=this.$Message,a=this.$Notice;this.$refs.form.validateField("mobile",(function(e){if(e)t.$Message.error(e);else{r.smsSendBtn=!0;var i=window.setInterval((function(){r.time--<=0&&(r.time=60,r.smsSendBtn=!1,window.clearInterval(i))}),1e3),s=o.loading("验证码发送中..",0);(0,p.EK)({mobile:n.mobile}).then((function(e){setTimeout(s,0),a.success({title:"系统提示",desc:"验证码获取成功，您的验证码为：".concat(e.captcha),duration:8})})).catch((function(e){setTimeout(s,1),clearInterval(i),r.time=60,r.smsSendBtn=!1,t.requestFailed(e)}))}}))},requestFailed:function(e){this.$Notice.error({title:"系统提示",desc:e.toString()}),this.registerBtn=!1}},watch:{"state.passwordLevel":function(e){console.log(e)}}},A=n(40089);const C=(0,A.Z)(v,[["render",d]]);var k=C},39339:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});n(59749),n(86544);var r=n(73396),o=(0,r.Uk)("查看邮箱"),a=(0,r.Uk)("返回首页");function i(e,t,n,i,s,u){var l=(0,r.up)("Button"),c=(0,r.up)("Result");return(0,r.wg)(),(0,r.j4)(c,{type:"success",title:u.email,desc:s.description},{actions:(0,r.w5)((function(){return[(0,r.Wm)(l,{size:"large",type:"primary"},{default:(0,r.w5)((function(){return[o]})),_:1}),(0,r.Wm)(l,{size:"large",style:{"margin-left":"8px"},onClick:u.goHomeHandle},{default:(0,r.w5)((function(){return[a]})),_:1},8,["onClick"])]})),_:1},8,["title","desc"])}var s=n(60107),u=(n(70560),{name:"RegisterResult",components:{Result:s.Z},data:function(){return{description:"激活邮件已发送到你的邮箱中，邮件有效期为24小时。请及时登录邮箱，点击邮件中的链接激活帐户。",form:{}}},computed:{email:function(){var e=this.form&&this.form.email||"xxx";return"你的账户：".concat(e," 注册成功")}},created:function(){this.form=this.$route.params},methods:{goHomeHandle:function(){this.$router.push({name:"login"})}}}),l=n(40089);const c=(0,l.Z)(u,[["render",i]]);var d=c},94897:function(e,t,n){e.exports=n.p+"img/wx.27465650.svg"}}]);