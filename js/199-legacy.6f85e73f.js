(self["webpackChunkiview_admin_plus"]=self["webpackChunkiview_admin_plus"]||[]).push([[199],{94362:function(t,e,n){var r=n(41589),o=Math.floor,i=function(t,e){var n=t.length,c=o(n/2);return n<8?a(t,e):s(t,i(r(t,0,c),e),i(r(t,c),e),e)},a=function(t,e){var n,r,o=t.length,i=1;while(i<o){r=i,n=t[i];while(r&&e(t[r-1],n)>0)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},s=function(t,e,n,r){var o=e.length,i=n.length,a=0,s=0;while(a<o||s<i)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=i},68886:function(t,e,n){var r=n(88113),o=r.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},30256:function(t,e,n){var r=n(88113);t.exports=/MSIE|Trident/.test(r)},98008:function(t,e,n){var r=n(88113),o=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},2707:function(t,e,n){"use strict";var r=n(82109),o=n(1702),i=n(19662),a=n(47908),s=n(26244),c=n(41340),u=n(47293),l=n(94362),g=n(9341),f=n(68886),h=n(30256),p=n(7392),m=n(98008),d=[],v=o(d.sort),w=o(d.push),k=u((function(){d.sort(void 0)})),C=u((function(){d.sort(null)})),P=g("sort"),y=!u((function(){if(p)return p<70;if(!(f&&f>3)){if(h)return!0;if(m)return m<603;var t,e,n,r,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)d.push({k:e+r,v:n})}for(d.sort((function(t,e){return e.v-t.v})),r=0;r<d.length;r++)e=d[r].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}})),b=k||!C||!P||!y,S=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:b},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(y)return void 0===t?v(e):v(e,t);var n,r,o=[],c=s(e);for(r=0;r<c;r++)r in e&&w(o,e[r]);l(o,S(t)),n=o.length,r=0;while(r<n)e[r]=o[r++];while(r<c)delete e[r++];return e}})},10199:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var r=n(66252),o=n(3577),i=(0,r._)("span",{class:"ivu-pl-8"},"前端日志",-1),a=(0,r.Uk)("查看");function s(t,e,n,s,c,u){var l=(0,r.up)("Avatar"),g=(0,r.up)("Button"),f=(0,r.up)("Tooltip"),h=(0,r.up)("Tag"),p=(0,r.up)("Table"),m=(0,r.up)("Page"),d=(0,r.up)("Card");return(0,r.wg)(),(0,r.j4)(d,{shadow:""},{title:(0,r.w5)((function(){return[(0,r.Wm)(l,{icon:"md-locate",size:"small",style:{color:"#2f54eb",background:"#f0f5ff"}}),i]})),extra:(0,r.w5)((function(){return[(0,r.Wm)(f,{transfer:"",content:"导出日志",placement:"top"},{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{type:"dashed",icon:"ios-cloud-download-outline",onClick:u.exportLog,style:{"margin-right":"10px"}},null,8,["onClick"])]})),_:1}),(0,r.Wm)(f,{transfer:"",content:"清空日志",placement:"top"},{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{type:"dashed",icon:"md-trash",onClick:t.cleanLog},null,8,["onClick"])]})),_:1})]})),default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,o.C_)("".concat(t.$config.cssPrefix,"table-no-border"))},[(0,r.Wm)(p,{ref:"table",columns:c.columns,data:c.tableData,onOnSortChange:u.changeSort},{type:(0,r.w5)((function(t){var e=t.row;return[(0,r.Wm)(h,{color:"error"===e.type?"red":"blue"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.type),1)]})),_:2},1032,["color"])]})),page:(0,r.w5)((function(t){var e=t.row;return[(0,r.Uk)((0,o.zw)(e.meta.url),1)]})),request:(0,r.w5)((function(t){var e=t.row;return[(0,r.Uk)((0,o.zw)(e.meta.apiURL),1)]})),more:(0,r.w5)((function(t){var e=t.row;return[(0,r.Wm)(g,{size:"small",ghost:"",type:"primary",onClick:function(t){return u.viewLog(e)}},{default:(0,r.w5)((function(){return[a]})),_:2},1032,["onClick"])]})),_:1},8,["columns","data","onOnSortChange"]),(0,r.Wm)(m,{"show-total":"","show-sizer":"","show-elevator":"",class:"ivu-text-center",total:u.logList.length,onOnChange:u.changePage,onOnPageSizeChange:u.changePageSize},null,8,["total","onOnChange","onOnPageSizeChange"])],2)]})),_:1})}var c=n(95082),u=(n(2707),n(21249),n(47042),n(33907)),l=n(28762),g={name:"SystemLog",data:function(){var t=this;return{columns:[{title:"序号",align:"center",width:65,render:function(e,n){n.row,n.col;var r=n.index;return e("span",(t.currentPage-1)*t.pageSize+r+1)}},{title:"时间",key:"time",width:180,sortable:!0},{title:"类型",key:"type",width:100,slot:"type"},{title:"信息",key:"message"},{title:"触发页面",slot:"page"},{title:"请求地址",slot:"request"},{title:"详细信息",align:"center",width:100,slot:"more"}],tableData:[],currentPage:1,pageSize:10,timeOrder:"desc"}},computed:{logList:function(){return this.$store.state.log.logList}},watch:{logList:function(){this.changePage(this.currentPage)}},created:function(){this.changePage()},methods:(0,c.Z)((0,c.Z)({},(0,u.OI)([l.KM])),{},{exportLog:function(){this.logList.length?this.$refs.table.exportCsv({filename:"错误日志.csv"}):this.$Message.info("没有日志或异常")},viewLog:function(t){this.$Message.info("按F12打开控制台查看完整日志"),this.$console.capsule(this.$config.titleSuffix,"完整日志内容"),console.group("完整日志"),console.log("message: ",t.message),console.log("source: ",t.source),console.log("time: ",t.time),console.log("type: ",t.type),console.log("meta: ",t.meta),console.groupEnd()},changePage:function(t){var e=this;this.currentPage=t||1;var n=(this.currentPage-1)*this.pageSize,r=this.logList.map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{timestamp:new Date(t.time)})})).sort((function(t,n){return"asc"===e.timeOrder?t.timestamp-n.timestamp:n.timestamp-t.timestamp}));this.tableData=r.slice(n,n+this.pageSize)},changePageSize:function(t){this.pageSize=t,this.changePage(this.currentPage)},changeSort:function(t){this.timeOrder=t.order,this.changePage(this.currentPage)}})},f=n(83744);const h=(0,f.Z)(g,[["render",s]]);var p=h}}]);
//# sourceMappingURL=199-legacy.6f85e73f.js.map